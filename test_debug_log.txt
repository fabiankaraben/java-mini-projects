[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------< com.example:metrics-with-prometheus >-----------------
[INFO] Building metrics-with-prometheus 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- clean:3.4.0:clean (default-clean) @ metrics-with-prometheus ---
[INFO] Deleting /Users/fabian/Documents/CodeProjects/github.com/fabiankaraben/java-mini-projects/intermediate/13-metrics-with-prometheus/target
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ metrics-with-prometheus ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 0 resource from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.13.0:compile (default-compile) @ metrics-with-prometheus ---
[INFO] Recompiling the module because of changed source code.
[INFO] Compiling 2 source files with javac [debug parameters release 17] to target/classes
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ metrics-with-prometheus ---
[INFO] skip non existing resourceDirectory /Users/fabian/Documents/CodeProjects/github.com/fabiankaraben/java-mini-projects/intermediate/13-metrics-with-prometheus/src/test/resources
[INFO] 
[INFO] --- compiler:3.13.0:testCompile (default-testCompile) @ metrics-with-prometheus ---
[INFO] Recompiling the module because of changed dependency.
[INFO] Compiling 1 source file with javac [debug parameters release 17] to target/test-classes
[INFO] 
[INFO] --- surefire:3.5.2:test (default-test) @ metrics-with-prometheus ---
[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.example.metrics.MetricsWithPrometheusApplicationTests
15:55:17.326 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.example.metrics.MetricsWithPrometheusApplicationTests]: MetricsWithPrometheusApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
15:55:17.383 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.example.metrics.MetricsWithPrometheusApplication for test class com.example.metrics.MetricsWithPrometheusApplicationTests

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.4.1)

2026-02-09T15:55:17.549-03:00  INFO 87176 --- [           main] .m.MetricsWithPrometheusApplicationTests : Starting MetricsWithPrometheusApplicationTests using Java 25.0.2 with PID 87176 (started by fabian in /Users/fabian/Documents/CodeProjects/github.com/fabiankaraben/java-mini-projects/intermediate/13-metrics-with-prometheus)
2026-02-09T15:55:17.550-03:00  INFO 87176 --- [           main] .m.MetricsWithPrometheusApplicationTests : No active profile set, falling back to 1 default profile: "default"
WARNING: A restricted method in java.lang.System has been called
WARNING: java.lang.System::load has been called by org.apache.tomcat.jni.Library in an unnamed module (file:/Users/fabian/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/10.1.34/tomcat-embed-core-10.1.34.jar)
WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
WARNING: Restricted methods will be blocked in a future release unless native access is enabled

2026-02-09T15:55:18.173-03:00  INFO 87176 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2026-02-09T15:55:18.173-03:00  INFO 87176 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2026-02-09T15:55:18.178-03:00  INFO 87176 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2026-02-09T15:55:18.182-03:00  INFO 87176 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 9 ms
2026-02-09T15:55:18.211-03:00  INFO 87176 --- [           main] .m.MetricsWithPrometheusApplicationTests : Started MetricsWithPrometheusApplicationTests in 0.769 seconds (process running for 1.193)
Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build what is described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#0.3
Java HotSpot(TM) 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
WARNING: A Java agent has been loaded dynamically (/Users/fabian/.m2/repository/net/bytebuddy/byte-buddy-agent/1.15.11/byte-buddy-agent-1.15.11.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release

MockHttpServletRequest:
      HTTP Method = GET
      Request URI = /actuator/prometheus
       Parameters = {}
          Headers = []
             Body = null
    Session Attrs = {}

Handler:
             Type = org.springframework.web.servlet.resource.ResourceHttpRequestHandler

Async:
    Async started = false
     Async result = null

Resolved Exception:
             Type = org.springframework.web.servlet.resource.NoResourceFoundException

ModelAndView:
        View name = null
             View = null
            Model = null

FlashMap:
       Attributes = null

MockHttpServletResponse:
           Status = 404
    Error message = No static resource actuator/prometheus.
          Headers = [Vary:"Origin", "Access-Control-Request-Method", "Access-Control-Request-Headers"]
     Content type = null
             Body = 
    Forwarded URL = null
   Redirected URL = null
          Cookies = []
[ERROR] Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.395 s <<< FAILURE! -- in com.example.metrics.MetricsWithPrometheusApplicationTests
[ERROR] com.example.metrics.MetricsWithPrometheusApplicationTests.shouldExposePrometheusEndpoint -- Time elapsed: 0.024 s <<< FAILURE!
java.lang.AssertionError: Status expected:<200> but was:<404>
	at org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:61)
	at org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:128)
	at org.springframework.test.web.servlet.result.StatusResultMatchers.lambda$matcher$9(StatusResultMatchers.java:640)
	at org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:214)
	at com.example.metrics.MetricsWithPrometheusApplicationTests.shouldExposePrometheusEndpoint(MetricsWithPrometheusApplicationTests.java:80)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)

[INFO] 
[INFO] Results:
[INFO] 
[ERROR] Failures: 
[ERROR]   MetricsWithPrometheusApplicationTests.shouldExposePrometheusEndpoint:80 Status expected:<200> but was:<404>
[INFO] 
[ERROR] Tests run: 2, Failures: 1, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  2.932 s
[INFO] Finished at: 2026-02-09T15:55:18-03:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.5.2:test (default-test) on project metrics-with-prometheus: There are test failures.
[ERROR] 
[ERROR] See /Users/fabian/Documents/CodeProjects/github.com/fabiankaraben/java-mini-projects/intermediate/13-metrics-with-prometheus/target/surefire-reports for the individual test results.
[ERROR] See dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
